<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>Speak Something</title>
  
  
  
      <link rel="stylesheet" href="css/style.css">

  
</head>

<body>

  
<h2>Speak Something?</h2>
<div class="panels">
  <div class="panel">
    <h4>Anything in your mind?</h4>
    <textarea rows="2" placeholder="輸入文字" id="input">Enter Texts Here</textarea>
    <div class="button"> 
      <button class="speak" onclick="speak()">Speak Out Loud</button>
    </div>
  </div>
</div>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/tone/13.7.4/Tone.min.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/audiojs/1.0.1/audio.min.js'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase.js"></script>

  

  <!-- <script  src="js/index.js"></script> -->

  <script>
  console.clear()

  var config = {
    apiKey: "AIzaSyDublDYDws4SBSD976FC8hwhoVAWoTtinU",
    authDomain: "zonesound-b40d4.firebaseapp.com",
    databaseURL: "https://zonesound-b40d4.firebaseio.com",
    projectId: "zonesound-b40d4",
    storageBucket: "zonesound-b40d4.appspot.com",
    messagingSenderId: "133205700802"
  };
  firebase.initializeApp(config);
  
  const database = firebase.database();
  const latest = database.ref('textcollection/latest');

    latest.on('value', function (snapshot) {
    var input = snapshot.val().text
    $('input').text(input)
    console.log(input)
    var msg = new SpeechSynthesisUtterance(input)
    window.speechSynthesis.speak(msg)
  });

  function speak(){
    var input = $("#input").val()

    firebase.database().ref('textcollection/latest').update({
      'text': input
    });
    firebase.database().ref('textcollection/history').update({
      'text': input
    });
  }
  </script>


</body>

</html>
